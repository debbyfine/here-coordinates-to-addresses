(this["webpackJsonphere-coordinates-to-addresses"]=this["webpackJsonphere-coordinates-to-addresses"]||[]).push([[0],{15:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(1),i=n.n(r),o=n(9),s=n.n(o),c=(n(15),n(2)),d=n(3),l=n(5),u=n(4),h=(n.p,n(8),n(6)),p=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).dropRef=i.a.createRef(),e.state={dragging:!1,emptyList:!0},e.handleDrag=function(e){e.preventDefault(),e.stopPropagation()},e.handleDragIn=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter++,t.dataTransfer.items&&t.dataTransfer.items.length>0&&e.setState({dragging:!0,emptyList:!0})},e.handleDragOut=function(t){t.preventDefault(),t.stopPropagation(),e.dragCounter--,e.dragCounter>0||e.setState({dragging:!1,emptyList:!0})},e.handleDrop=function(t){t.preventDefault(),t.stopPropagation(),e.setState({dragging:!1,emptyList:!1}),t.dataTransfer.files&&t.dataTransfer.files.length>0&&(e.props.handleDrop(t.dataTransfer.files),t.dataTransfer.clearData(),e.dragCounter=0)},e}return Object(d.a)(n,[{key:"componentDidMount",value:function(){this.dragCounter=0;var e=this.dropRef.current;e.addEventListener("dragenter",this.handleDragIn),e.addEventListener("dragleave",this.handleDragOut),e.addEventListener("dragover",this.handleDrag),e.addEventListener("drop",this.handleDrop)}},{key:"componentWillUnmount",value:function(){var e=this.dropRef.current;e.removeEventListener("dragenter",this.handleDragIn),e.removeEventListener("dragleave",this.handleDragOut),e.removeEventListener("dragover",this.handleDrag),e.removeEventListener("drop",this.handleDrop)}},{key:"render",value:function(){return Object(a.jsxs)("div",{ref:this.dropRef,style:{display:"inline-block",position:"relative",width:"100%",height:"100%"},children:[this.state.emptyList&&Object(a.jsx)("div",{className:"drop-container-border",style:{border:"dashed grey 4px",backgroundColor:"rgba(255,255,255,.8)",position:"absolute",top:0,bottom:0,left:0,right:0,zIndex:9999},children:Object(a.jsx)("div",{style:{position:"absolute",top:"25%",right:0,left:0,textAlign:"center",color:"grey",fontSize:36},children:Object(a.jsx)("div",{children:"drop a file with coordinates here"})})}),this.props.children]})}}]),n}(r.Component),f=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){var e;Object(c.a)(this,n);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).restApiKey="kfu3Jby7KkRNhy2wgQcUofppTXl_Mj1wuVcIe6Otpi8",e.state={positions:[]},e.handleDrop=function(t){var n=[];e.setState({positions:n});var a,r=Object(h.a)(t);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(!i.type)return;"application/json"===i.type&&i.text().then((function(t){try{var a,r=JSON.parse(t),i=Object(h.a)(r);try{var o=function(){var t=a.value;e.coordinatesToAddress(t.Latitude,t.Longitude).then((function(a){var r={name:t.Name,latitude:t.Latitude,longitude:t.Longitude,address:a};n.push(r),e.setState({positions:n}),e.props.changedPositions(n)}))};for(i.s();!(a=i.n()).done;)o()}catch(s){i.e(s)}finally{i.f()}}catch(c){console.error(c.message())}}))}}catch(o){r.e(o)}finally{r.f()}},e}return Object(d.a)(n,[{key:"coordinatesToAddress",value:function(e,t){var n="https://revgeocode.search.hereapi.com/v1/revgeocode?at="+e+"%2C"+t+"&lang=en-US&apikey="+this.restApiKey;return new Promise((function(e,t){fetch(n).then((function(e){return e.json()})).then((function(t){e(t.items[0].title)}))}))}},{key:"render",value:function(){return Object(a.jsx)(p,{handleDrop:this.handleDrop,children:Object(a.jsx)("div",{className:"list",children:Object(a.jsx)("ol",{className:"positions-list",children:this.state.positions&&this.state.positions.map((function(e,t){return Object(a.jsxs)("li",{children:[Object(a.jsx)("h4",{children:Object(a.jsx)("b",{children:e.name})}),Object(a.jsx)("p",{children:e.address})]},t)}))})})})}}]),n}(r.Component),v=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).mapRef=r.createRef(),a.state={map:null,ui:null},a}return Object(d.a)(n,[{key:"changePositions",value:function(e){var t=this.state.map;null!=t&&t.removeObjects(t.getObjects());var n,a=[],r=Object(h.a)(e);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=new window.H.map.Marker({lat:i.latitude,lng:i.longitude});o.setData("<div>"+i.name+"</div>"),a.push(o)}}catch(s){r.e(s)}finally{r.f()}this.createMap(a)}},{key:"createMap",value:function(e){var t=this.state.map,n=this.state.ui,a=new window.H.map.Group;t.addObject(a),a.addEventListener("tap",(function(e){var t=new window.H.ui.InfoBubble(e.target.getGeometry(),{content:e.target.getData()});n.addBubble(t)}),!1);var r,i=Object(h.a)(e);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.addObject(o)}}catch(s){i.e(s)}finally{i.f()}this.setState({map:t,ui:n})}},{key:"componentDidMount",value:function(){var e=window.H,t=new e.service.Platform({apikey:"{DaTDB0YnlcvZRk8AF7tCZFOrsOBY4LVLyY2hWBOI3O0}"}).createDefaultLayers(),n=new e.Map(this.mapRef.current,t.vector.normal.map,{center:{lat:50,lng:5},zoom:4,pixelRatio:window.devicePixelRatio||1}),a=(new e.mapevents.Behavior(new e.mapevents.MapEvents(n)),e.ui.UI.createDefault(n,t));this.setState({map:n,ui:a})}},{key:"componentWillUnmount",value:function(){this.state.map.dispose()}},{key:"render",value:function(){return Object(a.jsx)("div",{ref:this.mapRef,style:{height:"100vh"}})}}]),n}(r.Component),g=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(e){var a;return Object(c.a)(this,n),(a=t.call(this,e)).changedPositions=function(e){a.child.current.changePositions(e)},a.child=i.a.createRef(),a}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"drag-drop",children:Object(a.jsx)(f,{changedPositions:this.changedPositions})}),Object(a.jsx)("div",{className:"map",children:Object(a.jsx)(v,{ref:this.child})})]})}}]),n}(r.Component),j=function(e){Object(l.a)(n,e);var t=Object(u.a)(n);function n(){return Object(c.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:Object(a.jsx)(g,{})})}}]),n}(r.Component),b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),r(e),i(e),o(e)}))};s.a.render(Object(a.jsx)(i.a.StrictMode,{children:Object(a.jsx)(j,{})}),document.getElementById("root")),b()},8:function(e,t,n){}},[[16,1,2]]]);
//# sourceMappingURL=main.114cdccc.chunk.js.map